{% if menu.items is defined and menu %}
    {% if is_granted(app.user.roles, menu.roles ?? []) %}
        <nav class="navbar navbar-default">
            <ul class="nav nav-pills nav-stacked">
                {% for item in menu.items %}
                    {% if is_granted(item.subMenu.roles ?? ['IS_AUTHENTICATED_ANONYMOUSLY']) %}
                        {% if item.divider is defined and item.divider %}
                            <li class="nav-divider" role="separator"></li>
                        {% else %}
                            {% if item.active is defined %}
                            <li{% if app.request.attributes.get('_route') starts with item.active %} class="active"{% endif %}>
                            {% else %}
                                <li>
                            {% endif %}
                            <a
                                    {% if item.callback is defined and item.callback %}
                                        href="{{ item.route ? path(item.route, {'callback': app.request.uri|callback }) : '#' }}"
                                    {% else %}
                                        href="{{ item.route ? path(item.route) : '#' }}"
                                    {% endif %}
                            >
                                {% if item.icon is defined and item.icon %}
                                    <span class="{{ item.icon }}"></span>
                                {% endif %}
                                <span {% if item.icon is defined and item.icon %} class="hidden-sm"{% endif %}>
                                    {% if item.label is defined and item.label %}
                                        {{ item.label|trans }}
                                    {% endif %}
                                </span>
                            </a>
                            </li>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </ul>
        </nav>
    {% endif %}
{% endif %}
